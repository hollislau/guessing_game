<script type="text/javascript">

  (function() {

    var outcome = {
      rockScissors: "Rock crushes scissors! ",
      rockLizard: "Rock crushes lizard! ",
      paperRock: "Paper covers rock! ",
      paperSpock: "Paper disproves Spock! ",
      scissorsPaper: "Scissors cuts paper! ",
      scissorsLizard: "Scissors decapitates lizard! ",
      lizardPaper: "Lizard eats paper! ",
      lizardSpock: "Lizard poisons Spock! ",
      spockRock: "Spock vaporizes rock! ",
      spockScissors: "Spock smashes scissors! ",
    };

    var Weapon = function() {
      this.rock = "";
      this.paper = "";
      this.scissors = "";
      this.lizard = "";
      this.spock = "";
    }

    var rock = new Weapon();
    var paper = new Weapon();
    var scissors = new Weapon();
    var lizard = new Weapon();
    var spock = new Weapon();

    rock.paper = [outcome.paperRock, false];
    rock.scissors = [outcome.rockScissors, true];
    rock.lizard = [outcome.rockLizard, true];
    rock.spock = [outcome.spockRock, false];
    rock.rock = true;

    paper.rock = [outcome.paperRock, true];
    paper.scissors = [outcome.scissorsPaper, false];
    paper.lizard = [outcome.lizardPaper, false];
    paper.spock = [outcome.paperSpock, true];
    paper.paper = true;

    scissors.rock = [outcome.rockScissors, false];
    scissors.paper = [outcome.scissorsPaper, true];
    scissors.lizard = [outcome.scissorsLizard, true];
    scissors.spock = [outcome.spockScissors, false];
    scissors.scissors = true;

    lizard.rock = [outcome.rockLizard, false];
    lizard.paper = [outcome.lizardPaper, true];
    lizard.scissors = [outcome.scissorsLizard, false];
    lizard.spock = [outcome.lizardSpock, true];
    lizard.lizard = true;

    spock.rock = [outcome.spockRock, true];
    spock.paper = [outcome.paperSpock, false];
    spock.scissors = [outcome.spockScissors, true];
    spock.lizard = [outcome.lizardSpock, false];
    spock.spock = true;

    var user = {
      name: "",
      choice: "",
      wins: "",
      getName: function () {
        user.name = prompt("What is your name, inferior one?");
        user.wins = user.name + " wins!"
        return user.name;
      },
      choose: function(string) {
        var choice = prompt(string);
        if (choice === "rock") {
          user.choice = rock;
        } else if (choice === "paper") {
          user.choice = paper;
        } else if (choice === "scissors") {
          user.choice = scissors;
        } else if (choice === "lizard") {
          user.choice = lizard;
        } else if (choice === "Spock") {
          user.choice = spock;
        }
        return user.choice;
      }
    };

    var sheldon = {
      name: "Sheldon",
      choice: "",
      wins: "Sheldon wins!",
      choose: function() {
        var randomSelection = Math.random();
        if (randomSelection <= 0.125) {
            sheldon.choice = "rock";
        } else if (randomSelection <= 0.25) {
            sheldon.choice = "paper";
        } else if (randomSelection <= 0.375) {
            sheldon.choice = "scissors";
        } else if (randomSelection <= 0.5) {
            sheldon.choice = "lizard";
        } else {
            sheldon.choice = "spock";
        }
        return sheldon.choice;
      }
    };

    var scoreboard = {
      user: 0,
      sheldon: 0,
      total: 0,
      win: function(bool) {
        if (bool) {
          scoreboard.user++;
          return user.wins;
        } else {
          scoreboard.sheldon++;
          return sheldon.wins;
        }
      }
    };

    var game = {
      choose: function() {
        var userChoice = user.choose("Okay " + user.name + "! Please select either 'rock', 'paper', 'scissors', 'lizard', or 'Spock'.");
        var sheldonChoice = sheldon.choose();
        while (userChoice[sheldonChoice] === true) {
          userChoice = user.choose("It's a tie! Please select 'rock', 'paper', 'scissors', 'lizard', or 'Spock' again.");
          sheldonChoice = sheldon.choose();
        }
        return userChoice[sheldonChoice];
      },
      play: function() {
        do {
          var choices = game.choose();
          var winner = scoreboard.win(choices[1]);
          var message = choices[0] + winner;
          alert(message);
          alert(user.name + ": " + scoreboard.user + " wins; Sheldon: " + scoreboard.sheldon + " wins");
          var replay = confirm("That was fun, " + user.name + "! Do you want to play again?");
        } while (replay);
        alert("Okay, thanks for playing, " + user.name + "!");
      }
    };

    user.getName();
    game.play();

  })()

</script>

